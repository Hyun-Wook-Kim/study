<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

</body>
<script>
    // ajax가 뭐임?
    // 쉽게 말하면 필요한 데이터만 비동기적으로 서  버에서 받아와서 슬쩍 렌더링 하는 몰래 온 손님같은 거임

    // JSON은 뭐임?
    // 사용자와 서버간 HTTP 통신을 위한 텍스트 데이터 포맷.

    // {
    //     "name" : "Lee",
    //     "age" : 20,
    //     "alive" : true,
    //     "hobby" : ["traveling", "tennis"]
    // }
    // 이런식으로 생겼고, 반드시 큰 따옴표로 문자열을 묶어야 한다. (작은 거 사용 불가!)

    const obj = {
        "name": "Lee",
        "age": 20,
        "alive": true,
        "hobby": ["traveling", "tennis"]
    }

    // 서버로 객체를 전송하려면 다음과 같이 JSON.stringfy를 이용한다.
    const jsonObj = JSON.stringify(obj)
    console.log(typeof jsonObj, jsonObj)
    const preetyJsonObj = JSON.stringify(obj, null, 2) // 요렇게 예쁘게 들여쓰기도 가능하다.
    console.log(typeof preetyJsonObj, preetyJsonObj)

    //replacer 함수. 
    function filter(key, value) {
        return typeof value === 'number' ? undefined : value;
    }
    // 두 번째 인수로 replacer (뭐 필터 같은 거)를 전달 가능.
    const strFilteredObject = JSON.stringify(obj, filter, 2);
    console.log(strFilteredObject)

    // 객체 말고 배열도 변환이 가능하다
    const todos = [{
            id: 1,
            content: 'HTML',
            completed: false
        },
        {
            id: 2,
            content: 'CSS',
            completed: true
        },
        {
            id: 3,
            content: 'JS',
            completed: false
        },
    ]
    const json = JSON.stringify(todos, null, 2)
    console.log(typeof json, json);


    // 반대로 서버에서 전송된 JSON 문자열 데이터를 객체로 사용하려면? (역직렬화)

    const obj2 = {
        name: "Lee",
        age: 20,
        alive: true,
        hobby: ['traveling', 'tennis']
    }

    const json2 = JSON.stringify(obj2);
    const parsed1 = JSON.parse(json2);
    console.log(parsed1);
    const todos2 = [{
            id: 1,
            content: 'HTML',
            completed: false
        },
        {
            id: 2,
            content: 'CSS',
            completed: true
        },
        {
            id: 3,
            content: 'JS',
            completed: false
        },
    ]
    // 얘는 똑똑하게도 배열이랑 배열 속 객체도 자동으로 변환해 준다. 아유 또또케!
    const jsonArray = JSON.stringify(todos2);
    const parsredArray = JSON.parse(jsonArray);
    console.log(parsredArray)
</script>

</html>